<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mariscos del Mar</title>
<style>
/* ---------- ESTILOS GENERALES ---------- */
body { 
  font-family: Arial, sans-serif; 
  margin:0; 
  padding:18px; 
  background:#f2f2f2; 
  min-height:100vh; 
  display:flex; 
  justify-content:center; 
  align-items:flex-start; 
}

.container { 
  background:white; 
  padding:30px 40px; 
  border-radius:15px; 
  box-shadow:0 5px 20px rgba(0,0,0,0.2); 
  width:95%; 
  max-width:1100px; 
  text-align:center; 
  margin-top:20px; 
}

/* LOGO */
img.logo { 
  width:100px; 
  height:100px; 
  border-radius:50%; 
  margin-bottom:15px; 
  object-fit:cover; 
  border:3px solid #0077b6; 
  transition: transform 0.3s ease-in-out; 
}
img.logo:hover { 
  transform: scale(1.2); 
}

h2 { 
  margin-bottom:25px; 
  color:#0077b6; 
  padding:5px 0; 
}

input, select, textarea, button { 
  width:100%; 
  padding:12px; 
  margin-bottom:15px; 
  border-radius:8px; 
  box-sizing:border-box; 
  font-size:1rem;
}

button { 
  background:#0077b6; 
  color:white; 
  border:none; 
  cursor:pointer; 
  font-weight:bold; 
  transition: background 0.3s, transform 0.2s; 
}
button:hover { 
  background:#0096c7; 
  transform: scale(1.05); 
}

.table-container { 
  width:100%; 
  max-height:80vh; 
  overflow-y:auto; 
  padding:20px; 
  margin-top:20px; 
}

.table-wrapper { 
  width:100%; 
  overflow-x:auto; 
}

table { 
  width:100%; 
  border-collapse:collapse; 
  table-layout:auto; 
}

th, td { 
  border-bottom:1px solid #ccc; 
  padding:10px; 
  text-align:center;
  word-wrap:break-word; 
}

th { 
  color:#0077b6; 
}

.action-btn { 
  padding:8px 12px; 
  border-radius:6px; 
  background:#0077b6; 
  color:white; 
  cursor:pointer; 
  font-size:0.9em; 
  margin:2px; 
  transition: all 0.2s; 
}
.action-btn:hover { 
  background:#0096c7; 
  transform: scale(1.05); 
}

/* PLATILLOS */
.platillo-item { 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  border:1px solid #ccc; 
  padding:12px; 
  margin-bottom:12px; 
  border-radius:10px; 
  flex-wrap:wrap;
}

.platillo-info { 
  flex:2; 
  min-width:200px; 
  text-align:left; 
}

.platillo-actions { 
  display:flex; 
  align-items:center; 
  gap:10px; 
}

.platillo-actions input { 
  width:60px; 
  padding:6px; 
}

.category-title { 
  text-align:left; 
  font-weight:bold; 
  margin-top:20px; 
  color:#0077b6; 
  font-size:1.2rem; 
  border-bottom:1px dashed #0077b6; 
  padding-bottom:5px; 
}

/* REALIZAR PEDIDO MÁS ANCHO */
.realizar-pedido-container { 
  width:100%; 
  max-width:1100px; 
  padding:25px; 
  margin:auto; 
  background:white; 
  border-radius:15px; 
  box-shadow:0 5px 20px rgba(0,0,0,0.2); 
  text-align:center; 
  max-height:80vh; 
  overflow-y:auto; 
}

/* MEDIA QUERIES RESPONSIVE */
@media (max-width:1000px){ 
  .container, .realizar-pedido-container { padding:20px; }
  table { font-size:0.95rem; }
}
@media (max-width:700px){ 
  body{padding:12px;} 
  img.logo{width:86px;height:86px;} 
  h2{font-size:1.2rem;} 
  table{font-size:0.85rem;} 
}
@media (max-width:480px){ 
  img.logo{width:72px;height:72px;} 
  h2{font-size:1.05rem;} 
  table{font-size:0.75rem;} 
  .platillo-item{flex-direction:column;align-items:flex-start;} 
  .platillo-actions{flex-direction:row;justify-content:space-between;width:100%;}
}
</style>
</head>
<body>
<div id="app"></div>
<script>
const app=document.getElementById('app');
const usuarios=[{id:'admin',password:'admin123',tipo:'Administrador'},{id:'emple1',password:'123',tipo:'Empleado'}];
let personal=[]; 
let platillos=[]; 
let pedidos=[]; 
let empleadoActual=null;

// --------- LOGIN ---------
function renderLogin(){
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Iniciar Sesión</h2>
        <input type="text" id="userId" placeholder="ID">
        <input type="password" id="userPassword" placeholder="Contraseña">
        <button onclick="login()">Ingresar</button>
    </div>`;
}
function login(){
    const id=document.getElementById('userId').value.trim();
    const password=document.getElementById('userPassword').value.trim();
    const user=usuarios.find(u=>u.id===id && u.password===password);
    if(user){empleadoActual=(user.tipo==='Empleado')?user.id:null; user.tipo==='Administrador'?renderAdminMenu():renderEmpleadoMenu();}
    else alert("Usuario o contraseña incorrecta");
}

// --------- MENUS ---------
function renderAdminMenu(){
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Menú Administrador</h2>
        <button onclick="renderRegistrarPersonal()">Registrar Personal</button>
        <button onclick="renderListaPersonal()">Lista de Personal</button>
        <button onclick="renderRegistrarPlatillo()">Registrar Platillo</button>
        <button onclick="renderListaPlatillos()">Lista de Platillos</button>
        <button onclick="renderListaPedidos()">Pedidos Realizados</button>
        <button onclick="renderLogin()">Cerrar Sesión</button>
    </div>`;
}
function renderEmpleadoMenu(){
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Menú Empleado</h2>
        <button onclick="renderRealizarPedido()">Realizar Pedido</button>
        <button onclick="renderListaPedidos()">Pedidos Realizados</button>
        <button onclick="renderLogin()">Cerrar Sesión</button>
    </div>`;
}

// --------- PERSONAL ---------
function renderRegistrarPersonal(){
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Registrar Personal</h2>
        <input type="text" id="personal-id" placeholder="ID">
        <input type="password" id="personal-password" placeholder="Contraseña">
        <select id="personal-tipo">
            <option value="Empleado">Empleado</option>
            <option value="Administrador">Administrador</option>
        </select>
        <input type="text" id="personal-nombre" placeholder="Nombre">
        <input type="text" id="personal-celular" placeholder="Celular">
        <input type="email" id="personal-mail" placeholder="Email">
        <input type="text" id="personal-direccion" placeholder="Dirección">
        <button onclick="agregarPersonal()">Agregar</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function agregarPersonal(){
    const id=document.getElementById('personal-id').value.trim();
    const password=document.getElementById('personal-password').value.trim();
    const tipo=document.getElementById('personal-tipo').value;
    const nombre=document.getElementById('personal-nombre').value.trim();
    const celular=document.getElementById('personal-celular').value.trim();
    const mail=document.getElementById('personal-mail').value.trim();
    const direccion=document.getElementById('personal-direccion').value.trim();
    if(!id||!password||!nombre){alert("ID, contraseña y nombre obligatorios."); return;}
    personal.push({id,password,tipo,nombre,celular,mail,direccion});
    alert("Personal agregado."); renderRegistrarPersonal();
}
function renderListaPersonal(){
    let filas=personal.map((p,i)=>`<tr>
        <td>${p.id}</td><td>${p.tipo}</td><td>${p.nombre}</td>
        <td>${p.celular}</td><td>${p.mail}</td><td>${p.direccion}</td>
        <td>
            <button class="action-btn" onclick="editarPersonal(${i})">Editar</button>
            <button class="action-btn" onclick="eliminarPersonal(${i})">Eliminar</button>
        </td>
    </tr>`).join('');
    app.innerHTML=`<div class="table-container">
        <img class="logo" src="img/logo.png">
        <h2>Lista de Personal</h2>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>ID</th><th>Tipo</th><th>Nombre</th><th>Celular</th><th>Email</th><th>Dirección</th><th>Acciones</th></tr></thead>
            <tbody>${filas}</tbody>
          </table>
        </div>
        <button onclick="renderRegistrarPersonal()">Agregar Nuevo</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function editarPersonal(i){
    const p=personal[i];
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Editar Personal</h2>
        <input type="text" id="edit-id" value="${p.id}">
        <input type="password" id="edit-password" value="${p.password}">
        <select id="edit-tipo">
            <option value="Empleado" ${p.tipo==='Empleado'?'selected':''}>Empleado</option>
            <option value="Administrador" ${p.tipo==='Administrador'?'selected':''}>Administrador</option>
        </select>
        <input type="text" id="edit-nombre" value="${p.nombre}">
        <input type="text" id="edit-celular" value="${p.celular}">
        <input type="email" id="edit-mail" value="${p.mail}">
        <input type="text" id="edit-direccion" value="${p.direccion}">
        <button onclick="guardarEdicionPersonal(${i})">Guardar</button>
        <button onclick="renderListaPersonal()">Cancelar</button>
    </div>`;
}
function guardarEdicionPersonal(i){
    const id=document.getElementById('edit-id').value.trim();
    const password=document.getElementById('edit-password').value.trim();
    const tipo=document.getElementById('edit-tipo').value;
    const nombre=document.getElementById('edit-nombre').value.trim();
    const celular=document.getElementById('edit-celular').value.trim();
    const mail=document.getElementById('edit-mail').value.trim();
    const direccion=document.getElementById('edit-direccion').value.trim();
    if(!id||!password||!nombre){alert("ID, contraseña y nombre obligatorios."); return;}
    personal[i]={id,password,tipo,nombre,celular,mail,direccion};
    alert("Empleado actualizado."); renderListaPersonal();
}
function eliminarPersonal(i){if(confirm("¿Desea eliminar este registro?")){personal.splice(i,1);renderListaPersonal();}}

// --------- PLATILLOS ---------
function renderRegistrarPlatillo(){
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Registrar Platillo</h2>
        <input type="text" id="platillo-nombre" placeholder="Nombre">
        <input type="number" id="platillo-precio" placeholder="Precio">
        <textarea id="platillo-descripcion" placeholder="Descripción"></textarea>
        <select id="platillo-categoria">
            <option value="Bebidas">Bebidas</option>
            <option value="Barra Fría">Barra Fría</option>
            <option value="Barra Caliente">Barra Caliente</option>
        </select>
        <button onclick="agregarPlatillo()">Agregar</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function agregarPlatillo(){
    const nombre=document.getElementById('platillo-nombre').value.trim();
    const precio=parseFloat(document.getElementById('platillo-precio').value);
    const descripcion=document.getElementById('platillo-descripcion').value.trim();
    const categoria=document.getElementById('platillo-categoria').value;
    if(!nombre||isNaN(precio)){alert("Nombre y precio obligatorios."); return;}
    platillos.push({nombre,precio,descripcion,categoria});
    alert("Platillo agregado"); renderRegistrarPlatillo();
}
function renderListaPlatillos(){
    let filas=platillos.length>0 ? platillos.map((p,i)=>`<tr>
        <td>${p.nombre}</td><td>${p.precio}</td><td>${p.descripcion}</td><td>${p.categoria}</td>
        <td>
            <button class="action-btn" onclick="editarPlatillo(${i})">Editar</button>
            <button class="action-btn" onclick="eliminarPlatillo(${i})">Eliminar</button>
        </td>
    </tr>`).join('') : `<tr><td colspan="5">No hay platillos registrados</td></tr>`;
    app.innerHTML=`<div class="table-container">
        <img class="logo" src="img/logo.png">
        <h2>Lista de Platillos</h2>
        <div class="table-wrapper">
          <table><thead><tr><th>Nombre</th><th>Precio</th><th>Descripción</th><th>Categoría</th><th>Acciones</th></tr></thead>
          <tbody>${filas}</tbody></table>
        </div>
        <button onclick="renderRegistrarPlatillo()">Agregar Nuevo</button>
        <button onclick="${empleadoActual?'renderEmpleadoMenu()':'renderAdminMenu()'}">Volver</button>
    </div>`;
}
function editarPlatillo(i){
    const p=platillos[i];
    app.innerHTML=`<div class="container">
        <img class="logo" src="img/logo.png">
        <h2>Editar Platillo</h2>
        <input type="text" id="edit-nombre" value="${p.nombre}">
        <input type="number" id="edit-precio" value="${p.precio}">
        <textarea id="edit-descripcion">${p.descripcion}</textarea>
        <select id="edit-categoria">
            <option value="Bebidas" ${p.categoria==='Bebidas'?'selected':''}>Bebidas</option>
            <option value="Barra Fría" ${p.categoria==='Barra Fría'?'selected':''}>Barra Fría</option>
            <option value="Barra Caliente" ${p.categoria==='Barra Caliente'?'selected':''}>Barra Caliente</option>
        </select>
        <button onclick="guardarEdicionPlatillo(${i})">Guardar</button>
        <button onclick="renderListaPlatillos()">Cancelar</button>
    </div>`;
}
function guardarEdicionPlatillo(i){
    const nombre=document.getElementById('edit-nombre').value.trim();
    const precio=parseFloat(document.getElementById('edit-precio').value);
    const descripcion=document.getElementById('edit-descripcion').value.trim();
    const categoria=document.getElementById('edit-categoria').value;
    if(!nombre||isNaN(precio)){alert("Nombre y precio obligatorios."); return;}
    platillos[i]={nombre,precio,descripcion,categoria};
    alert("Platillo actualizado"); renderListaPlatillos();
}
function eliminarPlatillo(i){if(confirm("¿Desea eliminar este platillo?")){platillos.splice(i,1);renderListaPlatillos();}}

// --------- REALIZAR PEDIDO (EMPLEADO) ----------
function renderRealizarPedido(){
    if(platillos.length===0){alert("No hay platillos registrados."); renderEmpleadoMenu(); return;}
    const categorias=['Bebidas','Barra Fría','Barra Caliente'];
    let listaHTML='';
    categorias.forEach(cat=>{
        const items=platillos.filter(p=>p.categoria===cat);
        if(items.length>0){
            listaHTML+=`<div class="category-title">${cat}</div>`;
            items.forEach(p=>{
                const i=platillos.indexOf(p);
                listaHTML+=`<div class="platillo-item">
                    <div class="platillo-info"><strong>${p.nombre}</strong><br>${p.descripcion}<br>$${p.precio}</div>
                    <div class="platillo-actions">
                        <input type="number" id="cantidad-${i}" min="0" value="0">
                    </div>
                </div>`;
            });
        }
    });
    app.innerHTML=`<div class="realizar-pedido-container">
        <img class="logo" src="img/logo.png">
        <h2>Realizar Pedido</h2>
        <input type="text" id="mesa-num" placeholder="Número de Mesa">
        ${listaHTML}
        <button onclick="confirmarPedido()">Agregar Pedido</button>
        <button onclick="renderEmpleadoMenu()">Volver</button>
    </div>`;
}
function confirmarPedido(){
    const mesa=document.getElementById('mesa-num').value.trim();
    if(!mesa){alert("Número de mesa requerido."); return;}
    let items=[]; let total=0;
    platillos.forEach((p,i)=>{
        const cantidad=parseInt(document.getElementById(`cantidad-${i}`).value);
        if(cantidad>0){items.push({nombre:p.nombre,cantidad,precio:p.precio*cantidad}); total+=p.precio*cantidad;}
    });
    if(items.length===0){alert("Seleccione al menos un platillo."); return;}
    if(confirm(`Total del pedido: $${total}. ¿Desea confirmar el pedido?`)){
        pedidos.push({mesa,empleado:empleadoActual||'admin',items,total,fecha:new Date().toLocaleString()});
        alert("Pedido registrado"); renderEmpleadoMenu();
    }
}

// ---------- LISTA DE PEDIDOS ----------
function renderListaPedidos(){
    let filas=pedidos.length>0?pedidos.map((p,i)=>`<tr>
        <td>${p.mesa}</td><td>${p.empleado}</td><td>${p.items.map(it=>it.nombre+' x'+it.cantidad).join(', ')}</td>
        <td>$${p.total}</td><td>${p.fecha}</td>
    </tr>`).join(''):`<tr><td colspan="5">No hay pedidos registrados</td></tr>`;
    app.innerHTML=`<div class="table-container">
        <img class="logo" src="img/logo.png">
        <h2>Pedidos Realizados</h2>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>Mesa</th><th>Empleado</th><th>Platillos</th><th>Total</th><th>Fecha</th></tr></thead>
            <tbody>${filas}</tbody>
          </table>
        </div>
        <button onclick="${empleadoActual?'renderEmpleadoMenu()':'renderAdminMenu()'}">Volver</button>
    </div>`;
}

// ---------- INICIAL ----------
renderLogin();
</script>
</body>
</html>
